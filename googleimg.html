<!DOCTYPE html>
<html lang="en">
<link rel="stylesheet" href="css/flex-layout-attribute.min.css">
<style>
	.wrapper{
		/*background-color: #444;
		width: 100%;
		height: 100%;*/
		display: inline-flex;
		flex-wrap: wrap;
		justify-content: space-between;
	}
	.box{
		/*flex-grow: 1;*/

		height: 120px;
		background-color: #eee;
		border: 1px solid #aaa;
		margin-bottom: 10px;
	}
	a{
		display: block;
		width: 100%;
		height: 100%;
		border: 1px solid blue;
		overflow: hidden;
	}
	img{
		/*width: auto;*/
		/*max-width: 100%;*/
		max-height: 120px;
	}
</style>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div class="wrapper" > <!-- layout="rows top-stretch" -->
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x200/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/250x100/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/150x220/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x140/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x110/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/150x120/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x150/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/250x180/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x220/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x230/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/250x210/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/350x190/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/120x110/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/220x100/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/250x120/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/240x130/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/230x150/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/210x120/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/270x170/00CED1/FFF/?text=img+placeholder"></a></div>
		<div class="box"><a href="javascript:;"><img src="https://api.fnkr.net/testimg/200x160/00CED1/FFF/?text=img+placeholder"></a></div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script>
		$(function(){
			var defaultHeight = 120;
			var $box = $(".box");
			var $img = $box.find('img');
			$(window).resize(function(e) {
				$img.each(function(index, el) {
				console.log("done");
					var imgW = $(this).width();
					var imgH = $(this).height();
					var $imgcontainer = $(this).parent();
					var ratio = imgW/imgH;
					if ( imgH < defaultHeight ) {
						$(this).css({
							width: imgH * ratio,
							height: '100%'
						});
					}
				});
			}).resize();
		});
		
	</script>
</body>
</html>